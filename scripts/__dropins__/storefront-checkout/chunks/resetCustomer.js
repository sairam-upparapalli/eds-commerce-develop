import{events as n}from"@dropins/tools/event-bus.js";import{a as l,c as d,d as c}from"./store-config.js";import{s as a,l as u}from"./fetch-graphql.js";import{Initializer as f}from"@dropins/tools/lib.js";import{g as s}from"./getCustomer.js";const g=()=>[n.on("cart/initialized",e=>{const t=(e==null?void 0:e.id)||null;a.cartId=t,t?s():o()},{eager:!0}),n.on("cart/data",e=>{const t=(e==null?void 0:e.id)||null;t!==a.cartId&&(a.cartId=t,t?s():o())},{eager:!0}),n.on("authenticated",e=>{a.authenticated=e,e||C()},{eager:!0})],r=new f({init:async e=>{const t=e||{};r.config.setConfig(t),m(t)},listeners:g}),k=r.config,m=async e=>{var i;const t=(i=e==null?void 0:e.models)==null?void 0:i.StoreConfig;if(!t)return u();l.value={data:t.initialData,pending:!1}},o=()=>{a.cartId=null,d.value={pending:!1,data:null}},C=()=>{a.authenticated=!1,c.value={pending:!1,data:null}};export{m as a,C as b,k as c,r as i,o as r};
