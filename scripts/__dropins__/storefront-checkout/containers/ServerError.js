import{jsx as t,jsxs as n}from"@dropins/tools/preact-jsx-runtime.js";import"@dropins/tools/event-bus.js";import{b as i}from"../chunks/store-config.js";import"../chunks/fetch-graphql.js";import{g as u}from"../chunks/getCustomer.js";/* empty css                             */import{IllustratedMessage as p,Icon as l,Button as d}from"@dropins/tools/components.js";/* empty css                       */import{classes as s}from"@dropins/tools/lib.js";import{useEffect as h}from"@dropins/tools/preact-hooks.js";/* empty css                  */import{S as v}from"../chunks/OrderError.js";import{useText as k}from"@dropins/tools/i18n.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/getCart.graphql.js";import"@dropins/tools/preact-compat.js";const f=({className:r,errorMessage:e,contactSupport:a,...c})=>{const{onClick:m}=c,o=k({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"});return t(p,{"aria-invalid":"true","aria-describedby":"checkout-server-error__message","aria-live":"polite",className:s(["checkout-server-error",r]),"data-testid":"checkout-server-error",heading:e??o.Title,message:n("p",{id:s(["checkout-server-error__message"]),children:[o.Message,t("br",{}),t("span",{children:a??o.ContactSupport})]}),icon:t(l,{className:s(["checkout-server-error__icon"]),source:v}),action:t(d,{className:s(["checkout-server-error__button"]),onClick:m,children:o.Button})})},O=({onServerError:r})=>{const e=i.value,a=async()=>{await u(),i.value=void 0};return h(()=>{e&&(r==null||r())},[e,r]),e?t(f,{errorMessage:e,onClick:a}):null};export{O as ServerError,O as default};
